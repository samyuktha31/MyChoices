<style>
    .nav nav-tabs {
        background-color: whitesmoke;
    }
</style>
<my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>

<div class="table-responsive">
    <table class="table" *ngIf="caseBook">
        <thead>
            <tr style="background-color:rgba(10, 10, 10, 0.84); color:whitesmoke">
                <th>Case Number</th>
                <th>Client Name</th>
                <th>Status</th>
                <th>Center</th>
                <th>Register Date</th>
            </tr>
        </thead>
        <tr style="color:white">
            <td>{{caseBook.CaseHeader.CaseNumber}}</td>
            <td>{{caseBook.CaseHeader.ClientName}}</td>
            <td>{{caseBook.CaseHeader.CaseStatus}}</td>
            <td>{{caseBook.CaseHeader.CenterTitle}}</td>
            <td>{{caseBook.CaseHeader.RegisterDateString}}</td>
        </tr>
    </table>
</div>

<div class="container-fluid case-detail-container" *ngIf="casePrimaryForm">
    <!-- regular tabs -->
    <tabset>
        <tab heading="Primary Info" class="active" style="width:100%">
            <my-spinner [isRunning]="!isPrimaryDataLoaded"></my-spinner>
            <form [formGroup]="casePrimaryForm" *ngIf="isPrimaryDataLoaded">
                <div class="row">

                    <div class="col-md-6 d-flex flex-column">
                        <div class="card flex-fill">
                            <div class="card-header">
                                Primary Info
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Center *</label>
                                    <ng-select [options]="centerOptionList"
                                               placeholder="Select Center"
                                               [formControl]="casePrimaryForm.controls['CenterId']"
                                               (selected)="onCenterSelected($event)"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['CenterId'].hasError('required') && casePrimaryForm.controls['CenterId'].touched" class="mat-text-warn">Center is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Peace Maker *</label>
                                    <ng-select [options]="peaceMakerOptionsList"
                                               placeholder="Select Peace Maker"
                                               [formControl]="casePrimaryForm.controls['PeaceMakerId']"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['PeaceMakerId'].hasError('required') && casePrimaryForm.controls['PeaceMakerId'].touched" class="mat-text-warn">Peace Maker is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Counselor *</label>
                                    <ng-select [options]="counselorOptionsList"
                                               placeholder="Select Peace Maker"
                                               [formControl]="casePrimaryForm.controls['CounselorId']"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['CounselorId'].hasError('required') && casePrimaryForm.controls['CounselorId'].touched" class="mat-text-warn">Peace Maker is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeacemakerId">First Name *</label>
                                    <input placeholder="First Name" [formControl]="casePrimaryForm.controls['ClientFirstName']" [(ngModel)]="caseBook.Case.ClientFirstName" class="form-control" />
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['ClientFirstName'].hasError('required') && casePrimaryForm.controls['ClientFirstName'].touched" class="mat-text-warn">First Name is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeacemakerId">Last Name *</label>
                                    <input placeholder="Last Name" [formControl]="casePrimaryForm.controls['ClientLastName']" [(ngModel)]="caseBook.Case.ClientLastName" class="form-control" />
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['ClientLastName'].hasError('required') && casePrimaryForm.controls['ClientLastName'].touched" class="mat-text-warn">Last Name is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeacemakerId">M.I.</label>
                                    <textarea placeholder="Middle Initials" [formControl]="casePrimaryForm.controls['Mi']" [(ngModel)]="caseBook.Case.Mi" class="form-control" maxlength="2000"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="PeacemakerId">Father / Husband Name *</label>
                                    <input placeholder="Father / Husband Name" [formControl]="casePrimaryForm.controls['FatherName']" [(ngModel)]="caseBook.Case.FatherName" class="form-control" />
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['FatherName'].hasError('required') && casePrimaryForm.controls['FatherName'].touched" class="mat-text-warn">Father / Husband Name is required.</small>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 d-flex flex-column">
                        <div class="card flex-fill">
                            <div class="card-header">
                                Client Details
                            </div>
                            <div class="card-block">
                                
                                <div class="form-group">
                                    <label for="PeacemakerId">Mobile *</label>
                                    <div class="form-group" [class.has-danger]="casePrimaryForm.controls['MobileNumber'].invalid && casePrimaryForm.controls['MobileNumber'].touched">
                                        <input placeholder="Mobile" [formControl]="casePrimaryForm.controls['MobileNumber']" class="form-control" digits maxlength="14"/>
                                        <div>
                                            <small *ngIf="casePrimaryForm.controls['MobileNumber'].hasError('required') && casePrimaryForm.controls['MobileNumber'].touched">Mobile is required.</small>
                                            <small *ngIf="casePrimaryForm.controls['MobileNumber'].dirty && casePrimaryForm.controls['MobileNumber'].invalid">Please provide a valid Mobile Number</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Gender *</label>
                                    <ng-select [options]="genderLookupOptionsList"
                                               placeholder="Select Gender"
                                               [formControl]="casePrimaryForm.controls['GenderLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['GenderLookupId'].hasError('required') && casePrimaryForm.controls['GenderLookupId'].touched" class="mat-text-warn">Gender is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Marital Status *</label>
                                    <ng-select [options]="maritalStatusLookupOptionsList"
                                               placeholder="Select Marital Status"
                                               [formControl]="casePrimaryForm.controls['MaritalStatusLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['MaritalStatusLookupId'].hasError('required') && casePrimaryForm.controls['MaritalStatusLookupId'].touched" class="mat-text-warn">Marital Status is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Required Assistance *</label>
                                    <ng-select [options]="requireAssistanceLookupOptionsList"
                                               placeholder="Required Assistance"
                                               [formControl]="casePrimaryForm.controls['RequireAssistanceLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                    <div>
                                        <small *ngIf="casePrimaryForm.controls['RequireAssistanceLookupId'].hasError('required') && casePrimaryForm.controls['RequireAssistanceLookupId'].touched" class="mat-text-warn">Require Assistance is required.</small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeacemakerId">Remarks</label>
                                    <textarea placeholder="Remarks" [formControl]="casePrimaryForm.controls['Remarks']" class="form-control" maxlength="300"></textarea>
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" [disabled]="!casePrimaryForm.valid" (click)="onPrimayUpdate()">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </form>
            <hr />
            <div class="row" *ngIf="caseBook">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewAddress()">Add New Address &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="table-responsive">
                        <table class="table" style="color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Address</th>
                                    <th>Area</th>
                                    <th>City</th>
                                    <th>State</th>
                                    <th>PIN</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let address of caseBook.vAddresses; let i = index">
                                    <td>{{address.Address}}</td>
                                    <td>{{address.Area}}</td>
                                    <td>{{address.City}}</td>
                                    <td>{{address.State}}</td>
                                    <td>{{address.PIN}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editAddress(address)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Children" style="width:100%">
            <my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>
            <div class="row" *ngIf="caseBook">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewChild()">Add New Children &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="table-responsive">
                        <table class="table" style="color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Name</th>
                                    <th>Age(In Years)</th>
                                    <th>Gender</th>
                                    <th>Relationship With Abuser</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let children of caseBook.vChildren; let i = index">
                                    <td>{{children.Name}}</td>
                                    <td>{{children.Age}}</td>
                                    <td>{{children.Gender}}</td>
                                    <td>{{children.Relation}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editChild(children)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Client & Household" style="width:100%" *ngIf="clientAndHouseholdForm">
            <my-spinner [isRunning]="!isHouseHoldDataLoaded"></my-spinner>
            <form [formGroup]="clientAndHouseholdForm" *ngIf="isHouseHoldDataLoaded">
                <div class="row">

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Family
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Any children deceased/miscarried/aborted?</label>
                                    <ss-multiselect-dropdown [options]="childrenDeceasedLookupOptionsList"
                                                             [formControl]="clientAndHouseholdForm.controls['ChildrenDeceasedLookupId']"
                                                             [(ngModel)]="caseBook.FamilyHouseHold.ChildrenDeceasedLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Household income</label>
                                    <ng-select [options]="incomeLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['HouseHoldIncomeLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Have you sought help for your issues before coming to My Choices?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['SoughtHelpYesNoLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">yes, specify</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['SoughtHelpDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, what was the outcome of that help?</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['SoughtHelpOutPut']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If you would like Operation Peacemaker to assist you with your current domestic violence situation, please select the services you would make use of</label>
                                    <ss-multiselect-dropdown [options]="peacemakerAssistanceOptionsList"
                                                             [formControl]="clientAndHouseholdForm.controls['PeacemakerAssistanceLookupId']"
                                                             [(ngModel)]="caseBook.FamilyHouseHold.PeacemakerAssistanceLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If other, please specify</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['PeacemakerAssistanceDesc']" class="form-control" />
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Family (2)
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Would you like a Peacemaker to do follow up with you?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['PeacemakerFollowupYesNoLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Did the client sign the registration form?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['ClientSignedRegistrationFormYesNoLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <div class="form-group" [class.has-danger]="clientAndHouseholdForm.controls['ClientEmailId'].invalid && clientAndHouseholdForm.controls['ClientEmailId'].touched">
                                        <label for="PeaceMakerId">Client's Email</label>
                                        <input type="email" id="ClientEmailId" [formControl]="clientAndHouseholdForm.controls['ClientEmailId']" inputmode="email" class="form-control"/>
                                        <small *ngIf="clientAndHouseholdForm.controls['ClientEmailId'].dirty && clientAndHouseholdForm.controls['ClientEmailId'].invalid">                                            
                                            Please provide a valid email
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Religion</label>
                                    <ng-select [options]="religionOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['ReligionLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Level of education</label>
                                    <ng-select [options]="levelOfEducationOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['LevelOfEducationLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Vocational skills</label>
                                    <ng-select [options]="vocationalSkillsOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['VocationalSkillsLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">If other Vocational skills, please specify:</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['VocationalSkillsDesc']" class="form-control" />
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Family (3)
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="PeaceMakerId">Occupation</label>
                                    <ng-select [options]="occupationOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['OccupationLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">If self-employed or employed, please specify:</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['OccupationDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Client Income</label>
                                    <ng-select [options]="incomeLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="clientAndHouseholdForm.controls['ClientIncomeLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Household members living in same house</label>
                                    <ss-multiselect-dropdown [options]="householdMembersOptionsList"
                                                             [formControl]="clientAndHouseholdForm.controls['HouseHoldMembersLivingLookupId']"
                                                             [(ngModel)]="caseBook.FamilyHouseHold.HouseHoldMembersLivingLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Year of marriage</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['YearOfMarriage']" digits  maxlength="4" class="form-control" />
                                    <small *ngIf="clientAndHouseholdForm.controls['YearOfMarriage'].dirty && clientAndHouseholdForm.controls['YearOfMarriage'].invalid">
                                        Please provide a valid year
                                    </small>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">At what age did client have her first child?</label>
                                    <input [formControl]="clientAndHouseholdForm.controls['ClientAgeAtFirstChild']" digits maxlength="2" class="form-control" />
                                    <small *ngIf="clientAndHouseholdForm.controls['ClientAgeAtFirstChild'].dirty && clientAndHouseholdForm.controls['ClientAgeAtFirstChild'].invalid">
                                        Please provide a valid age
                                    </small>
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" [disabled]="!clientAndHouseholdForm.valid" (click)="onUpdateHouseHoldInfo()">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </form>
        </tab>

        <tab heading="Spouse" style="width:100%" *ngIf="spouseForm">
            <my-spinner [isRunning]="!isSpouseDataLoaded"></my-spinner>
            <form [formGroup]="spouseForm" *ngIf="isSpouseDataLoaded">
                <div class="row">

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Spouse Info
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Spouse Name</label>
                                    <input [formControl]="spouseForm.controls['SpouseName']" maxlength="30" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Spouse Home phone</label>
                                    <div class="form-group" [class.has-danger]="spouseForm.controls['SpouseHomePhone'].invalid && spouseForm.controls['SpouseHomePhone'].touched">
                                        <input [formControl]="spouseForm.controls['SpouseHomePhone']" digits maxlength="14" class="form-control" />
                                        <div>
                                            <small *ngIf="spouseForm.controls['SpouseHomePhone'].dirty && spouseForm.controls['SpouseHomePhone'].invalid">Please provide a valid Phone</small>
                                        </div>
                                    </div>
                                 </div>

                                <div class="form-group">
                                    <label for="CenterId">Spouse Mobile phone</label>
                                    <div class="form-group" [class.has-danger]="spouseForm.controls['SpouseMobilePhone'].invalid && spouseForm.controls['SpouseMobilePhone'].touched">
                                        <input [formControl]="spouseForm.controls['SpouseMobilePhone']" digits maxlength="14" class="form-control" />
                                        <div>
                                            <small *ngIf="spouseForm.controls['SpouseMobilePhone'].dirty && spouseForm.controls['SpouseMobilePhone'].invalid">Please provide a valid Mobile</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Spouse Occupation</label>
                                    <input [formControl]="spouseForm.controls['SpouseOccupation']" maxlength="30" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Spouse Education</label>
                                    <ng-select [options]="spouseEducationLookupIdLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="spouseForm.controls['SpouseEducationLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" [disabled]="!spouseForm.valid" (click)="onUpdateSpouse()">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Spouse Address
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Spouse's full address</label>
                                    <textarea type="text" [formControl]="spouseForm.controls['SpouseAddress']" class="form-control" maxlength="300"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Area</label>
                                    <input [formControl]="spouseForm.controls['Area']" maxlength="50" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">State</label>
                                    <ng-select [options]="spouseStateOptionsList"
                                               placeholder="Select State"
                                               [formControl]="spouseForm.controls['StateLookupId']"
                                               (selected)="onSpouseStateSelected($event)"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">City</label>
                                    <ng-select [options]="spouseCityOptionsList"
                                               placeholder="Select"
                                               [formControl]="spouseForm.controls['CityLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">PIN</label>
                                    <div class="form-group" [class.has-danger]="spouseForm.controls['PIN'].invalid && spouseForm.controls['PIN'].touched">
                                        <input [formControl]="spouseForm.controls['PIN']" digits maxlength="6" class="form-control" />
                                        <div>
                                            <small *ngIf="spouseForm.controls['PIN'].dirty && spouseForm.controls['PIN'].invalid">Please provide a valid PIN</small>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>


                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Emergency
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Primary Emergency Contact Name</label>
                                    <input [formControl]="spouseForm.controls['PrimaryEmergencyContactName']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Relationship to client</label>
                                    <ng-select [options]="emergencyRelationshipOptionsList"
                                               placeholder="Select"
                                               [formControl]="spouseForm.controls['PrimaryEmergencyRelationshipToClientLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Phone number</label>
                                    <div class="form-group" [class.has-danger]="spouseForm.controls['PrimaryEmergencyContactPhoneNumber'].invalid && spouseForm.controls['PrimaryEmergencyContactPhoneNumber'].touched">
                                        <input [formControl]="spouseForm.controls['PrimaryEmergencyContactPhoneNumber']" digits maxlength="14" class="form-control" />
                                        <div>
                                            <small *ngIf="spouseForm.controls['PrimaryEmergencyContactPhoneNumber'].dirty && spouseForm.controls['PrimaryEmergencyContactPhoneNumber'].invalid">Please provide a valid Phone number</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Address</label>
                                    <input [formControl]="spouseForm.controls['PrimaryEmergencyContactAdress']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Secondary Emergency Contact Name</label>
                                    <input [formControl]="spouseForm.controls['SecondaryEmergencyContactName']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Relationship to client</label>
                                    <ng-select [options]="emergencyRelationshipOptionsList"
                                               placeholder="Select"
                                               [formControl]="spouseForm.controls['SecondaryEmergencyRelationshipToClientLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Phone number</label>
                                    <div class="form-group" [class.has-danger]="spouseForm.controls['SecondaryEmergencyContactPhoneNumber'].invalid && spouseForm.controls['SecondaryEmergencyContactPhoneNumber'].touched">
                                        <input [formControl]="spouseForm.controls['SecondaryEmergencyContactPhoneNumber']" digits maxlength="14" class="form-control" />
                                        <div>
                                            <small *ngIf="spouseForm.controls['SecondaryEmergencyContactPhoneNumber'].dirty && spouseForm.controls['SecondaryEmergencyContactPhoneNumber'].invalid">Please provide a valid Phone number</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Address</label>
                                    <input [formControl]="spouseForm.controls['PrimaryEmergencyContactAdress']" class="form-control" />
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </tab>

        <tab heading="Physical Health" style="width:100%" *ngIf="physicalHealthForm">
            <my-spinner [isRunning]="!isPhysicalHealthDataLoaded"></my-spinner>
            <form [formGroup]="physicalHealthForm" *ngIf="isPhysicalHealthDataLoaded">
                <div class="row">
                    <div class="col-md-6 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Health
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Are you suffering from any major illness?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['SufferingFromAnyMajorIllnessLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, please specify:?</label>
                                    <input [formControl]="physicalHealthForm.controls['SufferingFromAnyMajorIllnessDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Do you have any diagnosed psychiatric illness?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['DiagnosedPsychiatricIllnessLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, please specify:?</label>
                                    <input [formControl]="physicalHealthForm.controls['DiagnosedPsychiatricIllnessDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">How much do you sleep per night?</label>
                                    <ng-select [options]="sleepPerNightLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['SleepPerNightLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>


                                <div class="form-group">
                                    <label for="CenterId">How is your appetite?</label>
                                    <ng-select [options]="appetiteLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['AppetiteLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Do you exercise?</label>
                                    <ng-select [options]="exerciseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['ExerciseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Are you on any medication?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['AnyMedicationLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, what medication:?</label>
                                    <input [formControl]="physicalHealthForm.controls['AnyMedicationDesc']" class="form-control" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Health (1)
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Are you on any substance?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['AnySubstanceLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Please specify:</label>
                                    <input [formControl]="physicalHealthForm.controls['AnySubstanceDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Are you currently pregnant?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="physicalHealthForm.controls['CurrentlyPregnantLookup']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, give details:</label>
                                    <input [formControl]="physicalHealthForm.controls['CurrentlyPregnantDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">What is the reason for seeking help?</label>
                                    <ss-multiselect-dropdown [options]="reasonForSeekingHelpLookupOptionsList"
                                                            [formControl]="physicalHealthForm.controls['ReasonForSeekingHelpLookupId']"
                                                             [(ngModel)]="caseBook.PhysicalHealth.ReasonForSeekingHelpLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If other, please specify</label>
                                    <input [formControl]="physicalHealthForm.controls['ReasonForSeekingHelpDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Who is abusing you?</label>
                                    <ss-multiselect-dropdown [options]="whoIsAbusingYouLookupOptionsList"
                                                             [formControl]="physicalHealthForm.controls['WhoIsAbusingYouLookupId']"
                                                             [(ngModel)]="caseBook.PhysicalHealth.WhoIsAbusingYouLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If others, please specify </label>
                                    <input [formControl]="physicalHealthForm.controls['WhoIsAbusingYouDesc']" class="form-control" />
                                </div>                                

                                <div class="form-group">
                                    <button class="btn btn-primary" (click)="onUpdatePhysicalHealth()">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </tab>

        <tab heading="Offender" style="width:100%" *ngIf="spouseForm">
            <my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>
            <div class="row" *ngIf="caseBook">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewOffender()">Add New Offender &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="table-responsive">
                        <table class="table" style="color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Name</th>
                                    <th>Age(In Years)</th>
                                    <th>Gender</th>
                                    <th>Relationship With Victim</th>
                                    <th>OtherRelationship</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let offender of caseBook.vOffender; let i = index">
                                    <td>{{offender.Name}}</td>
                                    <td>{{offender.Age}}</td>
                                    <td>{{offender.Gender}}</td>
                                    <td>{{offender.RelationshipWithVictim}}</td>
                                    <td>{{offender.OtherRelationship}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editOffender(offender)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Abuse" style="width:100%" *ngIf="caseAbuseForm">
            <my-spinner [isRunning]="!isAbuseDataLoaded"></my-spinner>
            <form [formGroup]="caseAbuseForm" *ngIf="isAbuseDataLoaded">
                <div class="row" *ngIf="caseBook">

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Others
                            </div>

                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Do you think you are suffering from abuse?</label>
                                    <ng-select [options]="sufferingFromAbuseLookupIdLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['SufferingFromAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If no, please specify</label>
                                    <input [formControl]="caseAbuseForm.controls['SufferingFromAbuseDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, how do you feel about the abuse?</label>
                                    <ss-multiselect-dropdown [options]="feelAboutAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['FeelAboutAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.FeelAboutAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">How do your parents feel about the abuse?</label>
                                    <ss-multiselect-dropdown [options]="farentsFeelAboutAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['ParentsFeelAboutAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.ParentsFeelAboutAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">How do your in laws feel about the abuse?</label>
                                    <ss-multiselect-dropdown [options]="lawFeelAboutAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['LawFeelAboutAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.LawFeelAboutAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Are there any signs of physical abuse? </label>
                                    <ng-select [options]="signsOfPhysicalAbuseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['SignsOfPhysicalAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If yes, Please specify</label>
                                    <input [formControl]="caseAbuseForm.controls['SignsOfPhysicalAbuseDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Weapons used by abuser on victim</label>
                                    <ss-multiselect-dropdown [options]="weaponsUsedLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['WeaponsUsedLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.WeaponsUsedLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>
                                <div class="form-group">
                                    <label for="CenterId">If others, Please specify</label>
                                    <input [formControl]="caseAbuseForm.controls['WeaponsUsedDesc']" class="form-control" />
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Others (2)
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Types of physical abuse - tick all applicable situations</label>
                                    <ss-multiselect-dropdown [options]="typesOfPhyscialAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['TypesOfPhyscialAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.TypesOfPhyscialAbuseLookupArray">

                                    </ss-multiselect-dropdown>

                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Frequency of physical abuse</label>
                                    <ng-select [options]="frequencyOfPhyscialAbuseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['FrequencyOfPhyscialAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Number of years physical abuse has been occuring</label>                                    
                                    <div class="form-group" [class.has-danger]="caseAbuseForm.controls['NumberOfYearsOfPhyscialAbuse'].invalid && caseAbuseForm.controls['NumberOfYearsOfPhyscialAbuse'].touched">
                                        <input type="number" id="NumberOfYearsOfPhyscialAbuse" [formControl]="caseAbuseForm.controls['NumberOfYearsOfPhyscialAbuse']" class="form-control" />
                                        <small *ngIf="caseAbuseForm.controls['NumberOfYearsOfPhyscialAbuse'].touched && caseAbuseForm.controls['NumberOfYearsOfPhyscialAbuse'].invalid">
                                            Value should be between 0 and 99
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Types of emotional abuse - tick all applicable situations</label>
                                    <ss-multiselect-dropdown [options]="typesOfEmotionalAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['TypesOfEmotionalAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.TypesOfEmotionalAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Frequency of emotional abuse</label>
                                    <ng-select [options]="frequencyOfEmotionalAbuseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['FrequencyOfEmotionalAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Number of years emotional abuse has been occurring</label>
                                    <div class="form-group" [class.has-danger]="caseAbuseForm.controls['NumberOfYearsOfEmotionalAbuse'].invalid && caseAbuseForm.controls['NumberOfYearsOfEmotionalAbuse'].touched">
                                        <input type="number" id="NumberOfYearsOfEmotionalAbuse" [formControl]="caseAbuseForm.controls['NumberOfYearsOfEmotionalAbuse']" class="form-control" />
                                        <small *ngIf="caseAbuseForm.controls['NumberOfYearsOfEmotionalAbuse'].touched && caseAbuseForm.controls['NumberOfYearsOfEmotionalAbuse'].invalid">
                                            Value should be between 0 and 99
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Types of sexual abuse - tick all applicable situations</label>
                                    <ss-multiselect-dropdown [options]="typesOfSexualAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['TypesOfSexualAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.TypesOfSexualAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Frequency of sexual abuse</label>
                                    <ng-select [options]="frequencyOfSexualAbuseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['FrequencyOfSexualAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>



                                <div class="form-group">
                                    <label for="CenterId">Number of years sexual abuse has been occurring</label>
                                    <div class="form-group" [class.has-danger]="caseAbuseForm.controls['NumberOfYearsOfSexualAbuse'].invalid && caseAbuseForm.controls['NumberOfYearsOfSexualAbuse'].touched">
                                        <input type="number" id="NumberOfYearsOfSexualAbuse" [formControl]="caseAbuseForm.controls['NumberOfYearsOfSexualAbuse']" class="form-control" />
                                        <small *ngIf="caseAbuseForm.controls['NumberOfYearsOfSexualAbuse'].touched && caseAbuseForm.controls['NumberOfYearsOfSexualAbuse'].invalid">
                                            Value should be between 0 and 99
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Others (3)
                            </div>

                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Types of economic abuse - tick all applicable situations</label>
                                    <ss-multiselect-dropdown [options]="typesOfEconomicAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['TypesOfEconomicAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.TypesOfEconomicAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Frequency of economic abuse</label>
                                    <ng-select [options]="frequencyOfEconomicAbuseLookupOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseAbuseForm.controls['FrequencyOfEconomicAbuseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Number of years economic abuse has been occurring</label>
                                    <div class="form-group" [class.has-danger]="caseAbuseForm.controls['NumberOfYearsOfEconomicAbuse'].invalid && caseAbuseForm.controls['NumberOfYearsOfEconomicAbuse'].touched">
                                        <input type="number" id="NumberOfYearsOfEconomicAbuse" [formControl]="caseAbuseForm.controls['NumberOfYearsOfEconomicAbuse']" class="form-control" />
                                        <small *ngIf="caseAbuseForm.controls['NumberOfYearsOfEconomicAbuse'].touched && caseAbuseForm.controls['NumberOfYearsOfEconomicAbuse'].invalid">
                                            Value should be between 0 and 99
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Reasons for abuse from abuser side</label>
                                    <ss-multiselect-dropdown [options]="reasonsForAbuseLookupOptionsList"
                                                             [formControl]="caseAbuseForm.controls['ReasonsForAbuseLookupId']"
                                                             [(ngModel)]="caseBook.Abuse.ReasonsForAbuseLookupArray">

                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">If other, please specify</label>
                                    <input [formControl]="caseAbuseForm.controls['ReasonForAbuseDesc']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" [disabled]="!caseAbuseForm.valid" (click)="onUpdateAbuse()">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </form>
        </tab>

        <tab heading="Sessions" style="width:100%">
            <my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>
            <div class="row" *ngIf="caseBook">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewSession()">Add New Session &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="table-responsive">
                        <table class="table" style="color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Duration (Min)</th>
                                    <th>Next Session</th>
                                    <th>Notes</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let sessionLog of caseBook.vSessionLog; let i = index">
                                    <td>{{sessionLog.CounselingDate}}</td>
                                    <td>{{sessionLog.TypeOfCounselingDesc}}</td>
                                    <td>{{sessionLog.DurationOfSessionMIn}}</td>
                                    <td>{{sessionLog.NextSessionScheduled}}</td>
                                    <td>{{sessionLog.SessionNotes}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editSession(sessionLog)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Mental Status" style="" *ngIf="isMentalDataLoaded">
            <my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>
            <div class="row" *ngIf="caseBook" style="">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewMental()">Add New Mental Status &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="" style="position: relative; width: 100%">
                        <table class="table table-responsive" style="position: absolute; width: 100%; color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Dress</th>
                                    <th>Hygiene</th>
                                    <th>BodyType</th>
                                    <th>Expression</th>
                                    <th>MotorActivity</th>
                                    <th>Vocabulary</th>
                                    <th>ImpulseControl</th>
                                    <th>Speech</th>
                                    <th>Behaviour</th>
                                    <th>Content</th>
                                    <th>FlowOfThought</th>
                                    <th>Orientation</th>
                                    <th>EstimatedIntellect</th>
                                    <th>Attention</th>
                                    <th>Insight</th>
                                    <th>Judgement</th>
                                    <th>Memory</th>
                                    <th>Information</th>
                                    <th>Abstraction</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let mental of caseBook.vMental; let i = index">
                                    <td>{{mental.MentalDress}}</td>
                                    <td>{{mental.MentalHygiene}}</td>
                                    <td>{{mental.MentalBodyType}}</td>
                                    <td>{{mental.MentalExpression}}</td>
                                    <td>{{mental.MentalMotorActivity}}</td>
                                    <td>{{mental.MentalVocabulary}}</td>
                                    <td>{{mental.MentalImpulseControl}}</td>
                                    <td>{{mental.MentalSpeech}}</td>
                                    <td>{{mental.MentalBehaviour}}</td>
                                    <td>{{mental.MentalContent}}</td>
                                    <td>{{mental.MentalFlowOfThought}}</td>
                                    <td>{{mental.MentalOrientation}}</td>
                                    <td>{{mental.MentalEstimatedIntellect}}</td>
                                    <td>{{mental.MentalAttention}}</td>
                                    <td>{{mental.MentalInsight}}</td>
                                    <td>{{mental.MentalJudgement}}</td>
                                    <td>{{mental.MentalMemory}}</td>
                                    <td>{{mental.MentalInformation}}</td>
                                    <td>{{mental.MentalAbstraction}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editMental(mental)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Feedback" style="width:100%" *ngIf="isFeedbackDataLoaded">
            <my-spinner [isRunning]="!isCaseBookDataLoaded"></my-spinner>
            <div class="row" *ngIf="caseBook">
                <div class="d-flex flex-column fill-width">
                    <div class="add-new-button-container">
                        <button class="btn btn-primary" (click)="addNewFeedback()">Add New Feedback &nbsp;<i class="fa fa-plus"></i></button>
                    </div>
                    <div class="table-responsive">
                        <table class="table" style="color:whitesmoke">
                            <thead class="thead-inverse">
                                <tr>
                                    <th>Respect</th>
                                    <th>Feel Safe and Secure</th>
                                    <th>Counselling</th>
                                    <th>Assistance</th>
                                    <th>Recommend Fee</th>
                                    <th>Able To Improve</th>
                                    <th>OPM Team Followup</th>
                                    <th>Suggestions</th>
                                    <th class="text-right"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let feedback of caseBook.FeedBack; let i = index">
                                    <td>{{feedback.RespectedDuringYourVisit}}</td>
                                    <td>{{feedback.FeelSafeAndSecure}}</td>
                                    <td>{{feedback.FeelThatCounselling}}</td>
                                    <td>{{feedback.AssistanceOfPeacemaker}}</td>

                                    <td>{{feedback.RecommendFreeCounselling}}</td>
                                    <td>{{feedback.AbleToImprove}}</td>
                                    <td>{{feedback.OPMTeamToFollowup}}</td>
                                    <td>{{feedback.AnySuggestions}}</td>
                                    <td class="text-right">
                                        <button class="btn btn-link" (click)="editFeedback(feedback)">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Legal" style="width:100%" *ngIf="caseLegalForm">
            <my-spinner [isRunning]="!isLegalDataLoaded"></my-spinner>
            <form [formGroup]="caseLegalForm" *ngIf="isLegalDataLoaded">
                <div class="row">

                    <div class="col-md-6 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Legal Data
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="PeaceMakerId">Case Number as per court</label>
                                    <input [formControl]="caseLegalForm.controls['CaseNumber']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Court</label>
                                    <input [formControl]="caseLegalForm.controls['Court']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Prayer</label>
                                    <input [formControl]="caseLegalForm.controls['Prayer']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Name of legal representative</label>
                                    <input [formControl]="caseLegalForm.controls['LegalRepresentative']" class="form-control" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Has the legal consent form been signed and submitted?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseLegalForm.controls['LegalConsentFormLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Has any legal action been taken by the client in this regard prior to approaching OPM for help?</label>
                                    <ng-select [options]="yesNoOptionsList"
                                               placeholder="Select"
                                               [formControl]="caseLegalForm.controls['LegalActionLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Outcome
                            </div>
                            <div class="card-block">
                                <div class="form-group">
                                    <label for="CenterId">Outcome</label>
                                    <ss-multiselect-dropdown [options]="outcomeLookupOptionList"
                                                             [formControl]="caseLegalForm.controls['OutcomeLookupId']"
                                                             [(ngModel)]="caseBook.Legal.OutcomeLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">List all documents that the client has submitted</label>
                                    <ss-multiselect-dropdown [options]="documentsLookupOptionList"
                                                             [formControl]="caseLegalForm.controls['DocumentsLookupId']"
                                                             [(ngModel)]="caseBook.Legal.DocumentsLookupArray">
                                    </ss-multiselect-dropdown>

                                </div>

                                <div class="form-group">
                                    <button class="btn btn-primary" (click)="onUpdateLegal()">Update</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </tab>

        <tab heading="Case Management" style="width:100%" *ngIf="caseManageForm">
            <my-spinner [isRunning]="!isManageDataLoaded"></my-spinner>
            <form [formGroup]="caseManageForm" *ngIf="isManageDataLoaded">
                <div class="row">
                    <div class="col-md-6 d-flex flex-column">
                        <div class="card">
                            <div class="card-header">
                                Case Data
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="CenterId">Status</label>
                                    <ng-select [options]="caseStatusOptionList"
                                               placeholder="Select"
                                               [formControl]="caseManageForm.controls['CaseStatusId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">If Referred, please specify referred to whom</label>
                                    <input [formControl]="caseManageForm.controls['ReferredToWhom']" class="form-control" maxlength="2000" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Source of case</label>
                                    <ng-select [options]="sourceOfCaseLookupOptionList"
                                               placeholder="Select"
                                               [formControl]="caseManageForm.controls['SourceOfCaseLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">If other, please specify</label>
                                    <input [formControl]="caseManageForm.controls['SourceOfCaseDesc']" class="form-control" maxlength="2000" />
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Type of counseling</label>
                                    <ss-multiselect-dropdown [options]="typesOfCounselingLookupOptionList"
                                                             [formControl]="caseManageForm.controls['TypesOfCounselingLookupId']"
                                                             [(ngModel)]="caseBook.Manage.TypesOfCounselingLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>

                                <div class="form-group">
                                    <div class="form-group" [class.has-danger]="caseManageForm.controls['TotalNoOfSessionsLookupId'].invalid && caseManageForm.controls['TotalNoOfSessionsLookupId'].touched">
                                        <label for="CenterId">Total no of sessions</label>
                                        <input type="number" id="TotalNoOfSessionsLookupId" [formControl]="caseManageForm.controls['TotalNoOfSessionsLookupId']" class="form-control" />
                                        <small *ngIf="caseManageForm.controls['TotalNoOfSessionsLookupId'].touched && caseManageForm.controls['TotalNoOfSessionsLookupId'].invalid">                                            
                                                Value should be between 0 & 99 And Non-Fractional.
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="form-group" [class.has-danger]="caseManageForm.controls['TotalHoursSpentLookupId'].invalid && caseManageForm.controls['TotalHoursSpentLookupId'].touched">
                                        <label for="CenterId">Total hours spent</label>
                                        <input type="number" id="TotalHoursSpentLookupId" [formControl]="caseManageForm.controls['TotalHoursSpentLookupId']" class="form-control" />
                                        <small *ngIf="caseManageForm.controls['TotalHoursSpentLookupId'].touched && caseManageForm.controls['TotalHoursSpentLookupId'].invalid">
                                            Value should be between 0 & 99 And two digit precision.  
                                        </small>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Reason for selected Closure status</label>
                                    <input [formControl]="caseManageForm.controls['ReasonForClosureStatus']" class="form-control" maxlength="2000" />
                                </div>


                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 d-flex flex-column">

                        <div class="card">
                            <div class="card-header">
                                Other Info (1)
                            </div>
                            <div class="card-block">

                                <div class="form-group">
                                    <label for="PeaceMakerId">Subject</label>
                                    <input [formControl]="caseManageForm.controls['CaseSubject']" class="form-control" maxlength="2000" />
                                </div>

                                <div class="form-group">
                                    <label for="PeaceMakerId">Description</label>
                                    <textarea [formControl]="caseManageForm.controls['CaseDescription']" class="form-control" maxlength="2000"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Relationship with PM</label>
                                    <ng-select [options]="relationshipWithPMLookupOptionList"
                                               placeholder="Select"
                                               [formControl]="caseManageForm.controls['RelationshipWithPMLookupId']"
                                               [allowClear]="true">
                                    </ng-select>
                                </div>

                                <div class="form-group">
                                    <label for="CenterId">Case resolution log</label>
                                    <input [formControl]="caseManageForm.controls['ResolutionLog']" class="form-control" maxlength="2000" />
                                </div>


                                <div class="form-group">
                                    <button class="btn btn-primary" [disabled]="!caseManageForm.valid" (click)="onUpdateManage()">Update</button>
                                </div>
                            </div>
                        </div>

                    </div>



                </div>
            </form>
        </tab>

    </tabset>


</div>


<div class="modal fade" bsModal #addressModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Case Address</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideAddressModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseAddressForm" *ngIf="caseAddressForm">
                    <div class="row">
                        <div class="col-md-12 d-flex flex-column">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Manage Address Details
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Address *</label>
                                        <textarea placeholder="Address" [formControl]="caseAddressForm.controls['Address']" class="form-control" maxlength="300"></textarea>
                                        <div>
                                            <small *ngIf="caseAddressForm.controls['Address'].hasError('required') && caseAddressForm.controls['Address'].touched" class="mat-text-warn">Fahter / Husband is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">PIN *</label>
                                        <div class="form-group" [class.has-danger]="caseAddressForm.controls['PIN'].invalid && caseAddressForm.controls['PIN'].touched">
                                            <input placeholder="PIN" [formControl]="caseAddressForm.controls['PIN']" class="form-control" digits maxlength="6"/>
                                            <div>
                                                <small *ngIf="caseAddressForm.controls['PIN'].hasError('required') && caseAddressForm.controls['PIN'].touched">PIN is required.</small>
                                                <small *ngIf="caseAddressForm.controls['PIN'].dirty && caseAddressForm.controls['PIN'].invalid">Please provide a valid PIN</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">State *</label>
                                        <ng-select [options]="stateOptionsList"
                                                   placeholder="Select State"
                                                   [formControl]="caseAddressForm.controls['StateId']"
                                                   (selected)="onStateSelected($event)"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseAddressForm.controls['StateId'].hasError('required') && caseAddressForm.controls['StateId'].touched" class="mat-text-warn">State is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="CityId">City *</label>
                                        <ng-select [options]="cityOptionsList"
                                                   placeholder="Select"
                                                   [formControl]="caseAddressForm.controls['CityId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseAddressForm.controls['CityId'].hasError('required') && caseAddressForm.controls['CityId'].touched" class="mat-text-warn">City is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Area *</label>
                                        <input placeholder="Area" [formControl]="caseAddressForm.controls['Area']" class="form-control" />
                                        <div>
                                            <small *ngIf="caseAddressForm.controls['Area'].hasError('required') && caseAddressForm.controls['Area'].touched" class="mat-text-warn">Area is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" [disabled]="!caseAddressForm.valid" (click)="saveAddress()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #childrenModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Case Children</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideChildrenModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseChildrenForm" *ngIf="caseChildrenForm">
                    <div class="row">
                        <div class="col-md-12 d-flex flex-column">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Manage Children Details
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Name *</label>
                                        <textarea placeholder="Name" [formControl]="caseChildrenForm.controls['Name']" class="form-control"></textarea>
                                        <div>
                                            <small *ngIf="caseChildrenForm.controls['Name'].hasError('required') && caseChildrenForm.controls['Name'].touched" class="mat-text-warn">Name is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Age *</label>
                                        <div class="form-group" [class.has-danger]="caseChildrenForm.controls['Age'].invalid && caseChildrenForm.controls['Age'].touched">
                                            <input type="number" id="Age" [formControl]="caseChildrenForm.controls['Age']" class="form-control" />
                                            <small *ngIf="caseChildrenForm.controls['Age'].touched && caseChildrenForm.controls['Age'].invalid">
                                                Value should be between 0 and 99
                                            </small>
                                        </div>
                                    </div>                                   

                                    <div class="form-group">
                                        <label for="PeacemakerId">Gender *</label>
                                        <ng-select [options]="genderLookupOptionsList"
                                                   placeholder="Select Gender"
                                                   [formControl]="caseChildrenForm.controls['GenderLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseChildrenForm.controls['GenderLookupId'].hasError('required') && caseChildrenForm.controls['GenderLookupId'].touched" class="mat-text-warn">Gender is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Relationship With Abuser *</label>
                                        <ng-select [options]="relationshipWithAbuserLookupOptionsList"
                                                   placeholder="Select Relationship"
                                                   [formControl]="caseChildrenForm.controls['RelationshipWithAbuserLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseChildrenForm.controls['RelationshipWithAbuserLookupId'].hasError('required') && caseChildrenForm.controls['RelationshipWithAbuserLookupId'].touched" class="mat-text-warn">Relation is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" [disabled]="!caseChildrenForm.valid" (click)="saveChildren()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #offenderModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Case Offender</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideOffenderModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseOffenderForm" *ngIf="caseOffenderForm">
                    <div class="row">
                        <div class="col-md-12 d-flex flex-column">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Manage Offender Details
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Name *</label>
                                        <textarea placeholder="Name" [formControl]="caseOffenderForm.controls['Name']" class="form-control"></textarea>
                                        <div>
                                            <small *ngIf="caseOffenderForm.controls['Name'].hasError('required') && caseOffenderForm.controls['Name'].touched" class="mat-text-warn">Name is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Age *</label>
                                        <div class="form-group" [class.has-danger]="caseOffenderForm.controls['Age'].invalid && caseOffenderForm.controls['Age'].touched">
                                            <input type="number" id="Age" [formControl]="caseOffenderForm.controls['Age']" class="form-control" />
                                            <small *ngIf="caseOffenderForm.controls['Age'].touched && caseOffenderForm.controls['Age'].invalid">
                                                Value should be between 0 and 99
                                            </small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Gender *</label>
                                        <ng-select [options]="genderLookupOptionsList"
                                                   placeholder="Select Gender"
                                                   [formControl]="caseOffenderForm.controls['GenderLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseOffenderForm.controls['GenderLookupId'].hasError('required') && caseOffenderForm.controls['GenderLookupId'].touched" class="mat-text-warn">Gender is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Relationship With Victim *</label>
                                        <ng-select [options]="relationshipWithVictimLookupOptionsList"
                                                   placeholder="Select Relationship"
                                                   [formControl]="caseOffenderForm.controls['RelationshipWithVictimLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseOffenderForm.controls['RelationshipWithVictimLookupId'].hasError('required') && caseOffenderForm.controls['RelationshipWithVictimLookupId'].touched" class="mat-text-warn">Relation is required.</small>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="PeacemakerId">If other, please specify</label>
                                        <textarea placeholder="Other Relationship" [formControl]="caseOffenderForm.controls['OtherRelationship']" class="form-control"></textarea>
                                        
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" [disabled]="!caseOffenderForm.valid" (click)="saveOffender()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #mentalModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Mental Status</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideMentalModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseMentalForm" *ngIf="caseMentalForm">
                    <div class="d-flex flex-column">
                        <div class="d-flex flex-column" style="margin-bottom: 10px;">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Mental Status
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Dress</label>
                                        <ss-multiselect-dropdown [options]="MentalDressLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalDressLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalDressLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Hygiene</label>
                                        <ss-multiselect-dropdown [options]="MentalHygieneLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalHygieneLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalHygieneLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Body Type</label>
                                        <ss-multiselect-dropdown [options]="MentalBodyTypeLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalBodyTypeLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalBodyTypeLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Expression</label>
                                        <ss-multiselect-dropdown [options]="MentalExpressionLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalExpressionLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalExpressionLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Motor Activity</label>
                                        <ss-multiselect-dropdown [options]="MentalMotorActivityLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalMotorActivityLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalMotorActivityLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Vocabulary</label>
                                        <ss-multiselect-dropdown [options]="MentalVocabularyLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalVocabularyLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalVocabularyLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <label for="PeacemakerId">Impulse Control</label>
                                    <ss-multiselect-dropdown [options]="MentalImpulseControlLookupOptionList"
                                        [formControl]="caseMentalForm.controls['MentalImpulseControlLookupId']"
                                        [(ngModel)]="caseBook.SelectedMental.MentalImpulseControlLookupArray">
                                    </ss-multiselect-dropdown>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-column" style="margin-bottom: 10px;">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Mental Status
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Speech</label>
                                        <ss-multiselect-dropdown [options]="MentalSpeechLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalSpeechLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalSpeechLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Behaviour</label>
                                        <ss-multiselect-dropdown [options]="MentalBehaviourLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalBehaviourLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalBehaviourLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Content</label>
                                        <ss-multiselect-dropdown [options]="MentalContentLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalContentLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalContentLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Flow Of Thought</label>
                                        <ss-multiselect-dropdown [options]="MentalFlowOfThoughtLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalFlowOfThoughtLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalFlowOfThoughtLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Orientation</label>
                                        <ss-multiselect-dropdown [options]="MentalOrientationLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalOrientationLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalOrientationLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Estimated Intellect</label>
                                        <ss-multiselect-dropdown [options]="MentalEstimatedIntellectLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalEstimatedIntellectLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalEstimatedIntellectLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Attention</label>
                                        <ss-multiselect-dropdown [options]="MentalAttentionLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalAttentionLookupId']"
                                            [(ngModel)] ="caseBook.SelectedMental.MentalAttentionLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex flex-column" style="margin-bottom: 10px;">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Mental Status
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Insight</label>
                                        <ss-multiselect-dropdown [options]="MentalInsightLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalInsightLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalInsightLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Judgement</label>
                                        <ss-multiselect-dropdown [options]="MentalJudgementLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalJudgementLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalJudgementLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Memory</label>
                                        <ss-multiselect-dropdown [options]="MentalMemoryLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalMemoryLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalMemoryLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Information</label>
                                        <ss-multiselect-dropdown [options]="MentalInformationLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalInformationLookupId']"
                                            [(ngModel)] ="caseBook.SelectedMental.MentalInformationLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Abstraction</label>
                                        <ss-multiselect-dropdown [options]="MentalAbstractionLookupOptionList"
                                            [formControl]="caseMentalForm.controls['MentalAbstractionLookupId']"
                                            [(ngModel)]="caseBook.SelectedMental.MentalAbstractionLookupArray">
                                        </ss-multiselect-dropdown>
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" (click)="saveMental()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #sessionsModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Session Management</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideSessionModal()" *ngIf="!saveInProgress">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseSessionForm" *ngIf="caseSessionForm">
                    <div class="row">
                        <div class="col-md-12 d-flex flex-column">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Manage Session
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Date *</label>
                                        <my-date-picker name="CounselingDate" id="CounselingDate" [formControl]="caseSessionForm.controls['CounselingDate']"></my-date-picker>
                                        <div>
                                            <small *ngIf="caseSessionForm.controls['CounselingDate'].hasError('required') && caseSessionForm.controls['CounselingDate'].touched" class="mat-text-warn">Date is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Counseling Type *</label>
                                        <ng-select [options]="typesOfCounselingLookupOptionList_S"
                                                   placeholder="Select"
                                                   [formControl]="caseSessionForm.controls['TypeOfCounselingLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseSessionForm.controls['TypeOfCounselingLookupId'].hasError('required') && caseSessionForm.controls['TypeOfCounselingLookupId'].touched" class="mat-text-warn">Counseling is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Duration (min) *</label>
                                        <input placeholder="Duration" [formControl]="caseSessionForm.controls['DurationOfSessionMIn']" type="number" max="3" class="form-control" />
                                        <div>
                                            <small *ngIf="caseSessionForm.controls['DurationOfSessionMIn'].hasError('required') && caseSessionForm.controls['DurationOfSessionMIn'].touched" class="mat-text-warn">Duration is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Next Session Date</label>
                                        <my-date-picker name="NextSessionScheduled" id="NextSessionScheduled" [formControl]="caseSessionForm.controls['NextSessionScheduled']"></my-date-picker>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Notes *</label>
                                        <input placeholder="Notes" [formControl]="caseSessionForm.controls['SessionNotes']" class="form-control" />
                                        <div>
                                            <small *ngIf="caseSessionForm.controls['SessionNotes'].hasError('required') && caseSessionForm.controls['SessionNotes'].touched" class="mat-text-warn">Notes is required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" [disabled]="!caseSessionForm.valid || saveInProgress" (click)="saveSession()">Save</button>
                                    </div>
                                    <div *ngIf="saveInProgress" class="d-flex justify-content-center">
                                        <i class="fa fa-spinner fa-spin fa-3x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" bsModal #feedbackModal="bs-modal" [config]="{backdrop: 'static'}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title pull-left">Client Feedback</h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="hideFeedbackModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="caseFeedbackForm" *ngIf="caseFeedbackForm">
                    <div class="row">
                        <div class="col-md-12 d-flex flex-column">
                            <div class="card flex-fill">
                                <div class="card-header">
                                    Client Feedback
                                </div>
                                <div class="card-block">

                                    <div class="form-group">
                                        <label for="PeacemakerId">Did you feel respected during your visit to the center? *</label>
                                        <ng-select [options]="RespectedDuringYourVisitLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['RespectedDuringYourVisitLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['RespectedDuringYourVisitLookupId'].hasError('required') && caseFeedbackForm.controls['RespectedDuringYourVisitLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Did you feel safe and secure to discuss your situation with the counselor? *</label>
                                        <ng-select [options]="FeelSafeAndSecureLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['FeelSafeAndSecureLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['FeelSafeAndSecureLookupId'].hasError('required') && caseFeedbackForm.controls['FeelSafeAndSecureLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Did you feel that the counselling helped you in dealing with your situation? *</label>
                                        <ng-select [options]="FeelThatCounsellingLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['FeelThatCounsellingLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['FeelThatCounsellingLookupId'].hasError('required') && caseFeedbackForm.controls['FeelThatCounsellingLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Did you find the assistance of the Peacemaker to be helpful? *</label>
                                        <ng-select [options]="AssistanceOfPeacemakerLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['AssistanceOfPeacemakerLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['AssistanceOfPeacemakerLookupId'].hasError('required') && caseFeedbackForm.controls['AssistanceOfPeacemakerLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Would you recommend the free counselling services to a friend or relative? *</label>
                                        <ng-select [options]="RecommendFreeCounsellingLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['RecommendFreeCounsellingLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['RecommendFreeCounsellingLookupId'].hasError('required') && caseFeedbackForm.controls['RecommendFreeCounsellingLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Are you now able to improve your situation at home and with your family? *</label>
                                        <ng-select [options]="AbleToImproveLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['AbleToImproveLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['AbleToImproveLookupId'].hasError('required') && caseFeedbackForm.controls['AbleToImproveLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Would you like the OPM team to follow-up with you after your case is closed? *</label>
                                        <ng-select [options]="OPMTeamToFollowupLookupOptionList"
                                                   placeholder="Select"
                                                   [formControl]="caseFeedbackForm.controls['OPMTeamToFollowupLookupId']"
                                                   [allowClear]="true">
                                        </ng-select>
                                        <div>
                                            <small *ngIf="caseFeedbackForm.controls['OPMTeamToFollowupLookupId'].hasError('required') && caseFeedbackForm.controls['OPMTeamToFollowupLookupId'].touched" class="mat-text-warn">Required.</small>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="PeacemakerId">Do you have any suggestions that could improve the client experience with Operation Peacemaker?</label>
                                        <input placeholder="Any Suggestions" [formControl]="caseFeedbackForm.controls['AnySuggestions']" class="form-control" />
                                    </div>

                                    <div class="form-group text-center">
                                        <button class="btn btn-primary" [disabled]="!caseFeedbackForm.valid" (click)="saveFeedback()">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>